var Cross=function(){function a(){try{return window.self!==window.top}catch(a){return!0}}function b(a,b){for(var c="js"==b?"script":"css"==b?"link":"none",d="js"==b?"src":"css"==b?"href":"none",e=document.getElementsByTagName(c),f=e.length;f>=0;f--)e[f]&&null!=e[f].getAttribute(d)&&e[f].getAttribute(d).indexOf(a)!=-1&&e[f].parentNode.removeChild(e[f])}var c,d,e,f,g,h,i,j,k,l,m,n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],o=function(b){void 0!=b&&(_debug=b.Debug),c=new Date,d="//backend.crawlersite.com",e="//crawlersite-kernel.azurewebsites.net",0==a()&&(s(),u(),A(null),B(null),C(null),D(null),E(null),L(),q({}),p())},p=function(){document.querySelectorAll||(document.querySelectorAll=function(a){var b,c=document.createElement("style"),d=[];for(document.documentElement.firstChild.appendChild(c),document._qsa=[],c.styleSheet.cssText=a+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),c.parentNode.removeChild(c);document._qsa.length;)b=document._qsa.shift(),b.style.removeAttribute("x-qsa"),d.push(b);return document._qsa=null,d}),document.querySelector||(document.querySelector=function(a){var b=document.querySelectorAll(a);return b.length?b[0]:null})},q=function(a){m=a},r=function(){return m},s=function(){_flingerElement=document.querySelector("[data-flinger]"),g=void 0!=_flingerElement.dataset.flinger&&_flingerElement.dataset.flinger},t=function(){return c.getTime()},u=function(){var a="-",b={};screen.width&&(width=screen.width?screen.width:"",height=screen.height?screen.height:"",b.width=width,b.height=height);var c={},d=window,e=document,g=e.documentElement,h=e.getElementsByTagName("body")[0],i=d.innerWidth||g.clientWidth||h.clientWidth,j=d.innerHeight||g.clientHeight||h.clientHeight;c.width=i,c.height=j;var k,l,m,o=navigator.appVersion,p=navigator.userAgent,q=navigator.appName,r=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10);(l=p.indexOf("Opera"))!=-1&&(q="Opera",r=p.substring(l+6),(l=p.indexOf("Version"))!=-1&&(r=p.substring(l+8))),(l=p.indexOf("OPR"))!=-1?(q="Opera",r=p.substring(l+4)):(l=p.indexOf("Edge"))!=-1?(q="Microsoft Edge",r=p.substring(l+5)):(l=p.indexOf("MSIE"))!=-1?(q="Microsoft Internet Explorer",r=p.substring(l+5)):(l=p.indexOf("Chrome"))!=-1?(q="Chrome",r=p.substring(l+7)):(l=p.indexOf("Safari"))!=-1?(q="Safari",r=p.substring(l+7),(l=p.indexOf("Version"))!=-1&&(r=p.substring(l+8))):(l=p.indexOf("Firefox"))!=-1?(q="Firefox",r=p.substring(l+8)):p.indexOf("Trident/")!=-1?(q="Microsoft Internet Explorer",r=p.substring(p.indexOf("rv:")+3)):(k=p.lastIndexOf(" ")+1)<(l=p.lastIndexOf("/"))&&(q=p.substring(k,l),r=p.substring(l+1),q.toLowerCase()==q.toUpperCase()&&(q=navigator.appName)),(m=r.indexOf(";"))!=-1&&(r=r.substring(0,m)),(m=r.indexOf(" "))!=-1&&(r=r.substring(0,m)),(m=r.indexOf(")"))!=-1&&(r=r.substring(0,m)),s=parseInt(""+r,10),isNaN(s)&&(r=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10));var t=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(o),u=!!navigator.cookieEnabled;"undefined"!=typeof navigator.cookieEnabled||u||(document.cookie="testcookie",u=document.cookie.indexOf("testcookie")!=-1);var v=a;for(var w in n){var x=n[w];if(x.r.test(p)){v=x.s;break}}var y=a;switch(/Windows/.test(v)&&(y=/Windows (.*)/.exec(v)[1],v="Windows"),v){case"Mac OS X":y=/Mac OS X (10[\.\_\d]+)/.exec(p)[1];break;case"Android":y=/Android ([\.\_\d]+)/.exec(p)[1];break;case"iOS":y=/OS (\d+)_(\d+)_?(\d+)?/.exec(o),y=y[1]+"."+y[2]+"."+(0|y[3])}var z=!1;try{z=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(A){z="undefined"!=typeof navigator.mimeTypes["application/x-shockwave-flash"]}var B=window.location.href,C=document.title;f={screen:b,browserSize:c,browser:q,browserVersion:r,browserMajorVersion:s,mobile:t,os:v,osVersion:y,cookies:u,flash:z,fullUserAgent:navigator.userAgent,absoluteUri:B,windowTitle:C}},v=function(){return{X:window.pageXOffset,Y:window.pageYOffset}},w=function(){return d},x=function(){return e},y=function(){return f},z=function(){return g},A=function(a){h=a},B=function(a){i=a},C=function(a){j=a},D=function M(){k=M},E=function(a){l=a},F=function(){return h},G=function(){return i},H=function(){return j},I=function(){return k},J=function(){return l},K=function(a,b){for(var c=0;c<b.length;c++)if(b[c].Id===a)return b[c];return null},L=function(){String.prototype.toDOM=function(){var a,b=document,c=b.createElement("div"),d=b.createDocumentFragment();for(c.innerHTML=this;a=c.firstChild;)d.appendChild(a);return d}};return{Initialize:o,TimeStamp:t,GetScrollPosition:v,GetServerUri:w,GetCoreUri:x,GetClientInformation:y,GetApiKey:z,SearchObjectByIdOnArray:K,CanUseHeatmaps:F,CanUseRAT:G,CanUseFunnels:H,CanUseScreenRecorder:I,CanUseFormAnalysis:J,SetUseHeatmaps:A,SetUseRAT:B,SetUseFunnels:C,SetUseScreenRecorder:D,SetUseFormAnalysis:E,CreateStringToDOMPrototype:L,SetFlingerObj:q,GetFlingerObj:r,InIframe:a,RemoveJSCSSfile:b}}();Cross.Initialize();var SocketHub=function(){var a,b,c,d,e,f,g=function(b){void 0!=b&&(a=b.Debug),h()},h=function(){var a=document.getElementsByTagName("head")[0],b=document.createElement("script");b.type="text/javascript",b.onload=i,b.src="//backend.crawlersite.com/socket.io.js",a.appendChild(b)},i=function(){j(),void 0!==a&&a&&console.log("Socket Library is loaded succesfully")},j=function(){void 0!==a&&a&&console.log("Connecting to server..."),b=io(Cross.GetServerUri()+"/user-pool-namespace",{query:"ApiKey="+Cross.GetApiKey()}),k()},k=function(){b.on("connect",function(){void 0!==a&&a&&console.log("Connection to server succesfully"),b.emit("Coplest.Flinger.AddApiKeyToSocket",{ApiKey:Cross.GetApiKey(),ClientInformation:Cross.GetClientInformation()}),b.emit("Coplest.Flinger.CanISendData",{ApiKey:Cross.GetApiKey()})}),b.on("Coplest.Flinger.ServerEvent",function(a){t(a.Command,a.Values)}),b.on("disconnect",function(){void 0!==a&&a&&console.log("Disconected from server")}),b.on("Coplest.Flinger.RAT",function(a){if(void 0!=a.Command)switch(a.Command){case"RATPoolConnection#Request":l(a.Values)}})},l=function(a){a.SocketId===u().id.split("#")[1]&&(console.log(Cross.GetServerUri()+a.RPN),d=io(Cross.GetServerUri()+a.RPN,{query:"ApiKey="+Cross.GetApiKey()}),m(a))},m=function(b){d.on("connect",function(b){void 0!==a&&a&&console.log("Connection to RAT Pool Namespace succesfully")}),d.on("Coplest.Flinger.RAT",function(c){if(void 0!=c.Command)switch(c.Command){case"ConnectedToRPN#Response":void 0!==a&&a&&console.log("Socket Event: ConnectedToRPN#Response"),f=c.Values.SocketId,d.emit("Coplest.Flinger.RAT",{Command:"ConnectToRATServiceNamespace#Request",Values:{Namespace:b.Namespace}},function(c){void 0!==a&&a&&console.log("Socket Event: ConnectToRATServiceNamespace#Request"),n(c.Values,b)})}})},n=function(a,b){var c=Cross.SearchObjectByIdOnArray(b.Namespace.Id,a.Namespace);null!=c&&(console.log("RAT Service Socket URI: "+Cross.GetServerUri()+"/"+c.Id),e=io(Cross.GetServerUri()+"/"+c.Id,{query:"ApiKey="+Cross.GetApiKey()}),o(a,b))},o=function(b,c){e.on("Coplest.Flinger.RAT",function(b){if(void 0!=b.Command)switch(b.Command){case"ConnectedToRSN#Response":void 0!==a&&a&&console.log("Socket Event: ConnectedToRSN#Response"),f=b.Values.SocketId,e.emit("Coplest.Flinger.RAT",{Command:"UserJoinToPrivateRoom#Request",Values:{SocketId:e.id,RoomId:c.RoomId}});break;case"UserJoinToPrivateRoom#Response":void 0!==a&&a&&console.log("Socket Event: UserJoinToPrivateRoom#Response"),e.emit("Coplest.Flinger.RAT",{Command:"TakeMyUserSocketId#Request",Values:{SocketId:e.id,RoomId:c.RoomId}});break;case"AllowControl#Request":void 0!==a&&a&&console.log("AllowControl#Request"),RATHub.InjectModal(b.Values);break;case"HideRealCursor#Request":void 0!==a&&a&&console.log("HideRealCursor#Request"),RATHub.HideRealCursor();break;case"PrintCursor#Request":void 0!==a&&a&&console.log("PrintCursor#Request"),RATHub.PrintCursor();break;case"SetInitialPositionCursor#Request":void 0!==a&&a&&console.log("SetInitialPositionCursor#Request"),RATHub.SetInitialPositionCursor(b.Values);break;case"SetScreenshotInterval#Request":void 0!==a&&a&&console.log("SetScreenshotInterval#Request"),RATHub.SetScreenshotInterval(b.Values);break;case"SetPositionMouse#Request":void 0!==a&&a&&console.log("SetPositionMouse#Request"),RATHub.SetMousePosition(b.Values);break;case"SetScrollDelta#Request":void 0!==a&&a&&console.log("SetScrollDelta#Request"),RATHub.SetScrollDelta(b.Values);break;case"Click#Request":void 0!==a&&a&&console.log("Click#Request"),RATHub.VirtualClick(b.Values);break;case"ReverseShellCommand#Request":void 0!==a&&a&&console.log("Click#Request"),RATHub.ReverseShellCommand(b.Values)}})},p=function(a){void 0!=e&&void 0!=Cross.GetApiKey()&&Cross.GetApiKey().length>0&&e.emit("Coplest.Flinger.RAT",{Command:a.Command,Values:a.Values})},q=function(a){void 0!=b&&void 0!=Cross.GetApiKey()&&Cross.GetApiKey().length>0&&b.emit(a.Command,a.Values)},r=function(a){void 0!=b&&void 0!=Cross.GetApiKey()&&Cross.GetApiKey().length>0&&b.emit("Coplest.Flinger.PushInsight",a)},s=function(a){void 0!=b&&void 0!=Cross.GetApiKey()&&Cross.GetApiKey().length>0&&b.emit("Coplest.Flinger.PushScreenshot",a)},t=function(a,b){c=new CustomEvent(a,{detail:b}),document.dispatchEvent(c)},u=function(){return b};return{Initialize:g,ConnectUserPoolNamespaceSocket:j,GetSocket:u,PushInsight:r,PushScreenshot:s,PushEvent:q,PushEventRAT:p}}(),EventHub=function(){var a,b=[],c=[],d=[];document.addEventListener("InsightsQueue",function(){b.length>0&&(b.forEach(function(a){SocketHub.PushInsight({Command:"Click",Values:{ApiKey:Cross.GetApiKey(),Event:a}})}),b.length=0),c.length>0&&(c.forEach(function(a){SocketHub.PushInsight({Command:"Movement",Values:{Api:Cross.GetApiKey(),Event:a}})}),c.length=0),d.length>0&&(d.forEach(function(a){SocketHub.PushInsight({Command:"Scroll",Values:{Api:Cross.GetApiKey(),Event:a}})}),d.length=0)},!1),document.addEventListener("CanUseHeatmaps",function(b){void 0!==a&&a&&(console.log("CanUseHeatmaps:"),console.log(b)),1==b.detail.success&&(Cross.SetUseHeatmaps(b.detail.result),1==b.detail.result&&SocketHub.PushEvent({Command:"Coplest.Flinger.ICanUseHeatmaps",Values:{}}))},!1);var e=function(b){void 0!=b&&(a=b.Debug,i())},f=function(){document.addEventListener("click",l)},g=function(){document.onmousemove=k},h=function(){window.addEventListener("scroll",j,!1)},i=function(){var a=".dot {width: 1px; height: 1px; background-color: #000000; position: absolute;}",b=document.getElementsByTagName("head")[0],c=document.createElement("style");c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),b.appendChild(c)},j=function(a){var b={Position:{X:this.scrollX,Y:this.scrollY},TimeStamp:Cross.TimeStamp(),Client:Cross.GetClientInformation(),Location:{}};void 0!=SocketHub.GetSocket()&&SocketHub.GetSocket().connected===!0?void 0!=Cross.CanUseHeatmaps()&&null!=Cross.CanUseHeatmaps()&&1==Cross.CanUseHeatmaps()&&SocketHub.PushInsight({Command:"Scroll",Values:{ApiKey:Cross.GetApiKey(),Event:b,Pathname:window.location.pathname}}):d.push(b)},k=function(b){var d,e,f,g;b=b||window.event,null==b.pageX&&null!=b.clientX&&(e=b.target&&b.target.ownerDocument||document,f=e.documentElement,g=e.body,b.pageX=b.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),b.pageY=b.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),void 0!==a&&a&&(d=document.createElement("div"),d.className="dot",d.style.left=b.pageX+"px",d.style.top=b.pageY+"px",document.body.appendChild(d));var h={Position:{X:b.pageX,Y:b.pageY},Scroll:Cross.GetScrollPosition(),TimeStamp:Cross.TimeStamp(),Client:Cross.GetClientInformation(),Location:{}};void 0!=SocketHub.GetSocket()&&SocketHub.GetSocket().connected===!0?void 0!=Cross.CanUseHeatmaps()&&null!=Cross.CanUseHeatmaps()&&1==Cross.CanUseHeatmaps()&&SocketHub.PushInsight({Command:"Movement",Values:{ApiKey:Cross.GetApiKey(),Event:h,Pathname:window.location.pathname}}):c.push(h)},l=function(c){var d={Position:{X:c.clientX,Y:c.clientY},Scroll:Cross.GetScrollPosition(),TimeStamp:Cross.TimeStamp(),Client:Cross.GetClientInformation(),Location:{}};void 0!==a&&a&&console.log("Mouse coords: ("+c.clientX+", "+c.clientY+")"),void 0!=SocketHub.GetSocket()&&SocketHub.GetSocket().connected===!0?void 0!=Cross.CanUseHeatmaps()&&null!=Cross.CanUseHeatmaps()&&1==Cross.CanUseHeatmaps()&&SocketHub.PushInsight({Command:"Click",Values:{ApiKey:Cross.GetApiKey(),Event:d,Pathname:window.location.pathname}}):b.push(d)},m=function(){return b},n=function(){return c},o=function(){return d};return{Initialize:e,ListenMouseClick:f,ListenMouseMovement:g,ListenMouseScroll:h,GetNotSentMouseClickEvents:m,GetNotSentMouseMovementEvents:n,GetNotSentMouseScrollEvents:o}}(),RATHub=function(){var a,b=5e3,c=".virtual-cursor {width: 10px; height: 17px; position: absolute;z-index:999999999;pointer-events: none!important;}",d='<img src="{CURSORSRC}" alt="virtual cursor" id="virtual-cursor" class="virtual-cursor">',e=".hide-real-cursor {cursor:none!important;}",f=0,g={X:0,Y:0},h="",i=function(b){void 0!=b&&(a=b.Debug)},j=function(a){h=a.RoomId,p(function(){n(function(){o(function(){m(function(){var a=Cross.GetFlingerObj();a.RATDialog={_dlg:{},Initialize:function(){var a=document.getElementById("rat-dialog");this._dlg=new DialogFx(a)},Toggle:function(){this._dlg.toggle()},SetData:function(a,b,c,d){document.querySelector("#rat-dialog>.dialog__content>h2").textContent=void 0==a?"Remote Administration Tool":a,document.querySelector("#rat-dialog>.dialog__content>h4").textContent=void 0==b?"Web site administrator want to control your session, do you want to accept?":b,document.querySelector("#rat-dialog>.dialog__content>div>.accept-button").textContent=void 0==c?"ALLOW":c,document.querySelector("#rat-dialog>.dialog__content>div>.cancel-button").textContent=void 0==d?"CLOSE":d},Destroy:function(a){document.querySelector("#rat-dialog").parentNode.removeChild(document.querySelector("#rat-dialog")),Cross.RemoveJSCSSfile("modernizr.custom.js","js"),Cross.RemoveJSCSSfile("dialog.css","css"),Cross.RemoveJSCSSfile("dialogFx.js","js"),Cross.GetFlingerObj().RATDialog=void 0,a()}},Cross.SetFlingerObj(a),Cross.GetFlingerObj().RATDialog.Initialize(),Cross.GetFlingerObj().RATDialog.SetData(),document.getElementById("allow-control").onclick=function(){l()},document.getElementById("deny-control").onclick=function(){k()},Cross.GetFlingerObj().RATDialog.Toggle()})})})})},k=function(){Cross.GetFlingerObj().RATDialog.Destroy(function(){SocketHub.PushEventRAT({Command:"UserDenyControl#Response",Values:{RoomId:h}})})},l=function(){Cross.GetFlingerObj().RATDialog.Destroy(function(){SocketHub.PushEventRAT({Command:"UserAllowControl#Response",Values:{RoomId:h}});var a=ScreenshotHub.TakeDOMScreenshot();SocketHub.PushEventRAT({Command:"UserScreenshot#Request",Values:{RoomId:h,Screenshot:a,UserBrowserScreen:Cross.GetClientInformation().browserSize,CurrentUserPath:Cross.GetClientInformation().absoluteUri,CurrentWindowTitle:Cross.GetClientInformation().windowTitle}})})},m=function(a){var b='<div id="rat-dialog" class="dialog"><div class="dialog__overlay"></div><div class="dialog__content"><h2></h2><h4></h4><div><button id="allow-control" class="action accept-button">Accept</button><button id="deny-control" class="action cancel-button" data-dialog-close>Close</button></div></div></div>',c=document.createRange();c.selectNode(document.body);var d=c.createContextualFragment(b);document.body.appendChild(d),a()},n=function(a){var b=document.createElement("link");b.type="text/css",b.rel="stylesheet",b.onload=function(){a()},b.href="//crawlersite-kernel.azurewebsites.net/build/assets/dialog.css";var c=document.getElementsByTagName("head")[0];c.appendChild(b)},o=function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("script");c.type="text/javascript",c.onload=function(){a()},c.src="//crawlersite-kernel.azurewebsites.net/build/assets/dialogFx.js",b.appendChild(c)},p=function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("script");c.type="text/javascript",c.onload=function(){a()},c.src="//crawlersite-kernel.azurewebsites.net/build/assets/modernizr.custom.js",b.appendChild(c)},q=function(){var a=document.getElementsByTagName("head")[0],b=document.createElement("style");b.styleSheet?b.styleSheet.cssText=e:b.appendChild(document.createTextNode(e)),a.appendChild(b);var c=document.getElementsByTagName("html")[0];c.className+=" hide-real-cursor"},r=function(a){if(void 0!=a.X&&null!=a.X&&void 0!=a.Y&&null!=a.Y){g.X=a.X,g.Y=a.Y,document.querySelector("#virtual-cursor").style.left=g.X+"px",document.querySelector("#virtual-cursor").style.top=f+g.Y+"px";var b=document.elementFromPoint(g.X,g.Y);if(void 0!=b&&null!=b){var c=new MouseEvent("mouseover",{bubbles:!0,cancelable:!0,view:window});b.dispatchEvent(c)}}},s=function(a){if(void 0!=a.X&&null!=a.X&&void 0!=a.Y&&null!=a.Y){g.X=a.X,g.Y=a.Y;var b=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.elementFromPoint(g.X,g.Y).dispatchEvent(b);var c=ScreenshotHub.TakeDOMScreenshot();SocketHub.PushEventRAT({Command:"UserScreenshot#Request",Values:{RoomId:h,Screenshot:c,UserBrowserScreen:Cross.GetClientInformation().browserSize,CurrentUserPath:Cross.GetClientInformation().absoluteUri,CurrentWindowTitle:Cross.GetClientInformation().windowTitle}})}},t=function(){var a=document.getElementsByTagName("head")[0],b=document.createElement("style");b.styleSheet?b.styleSheet.cssText=c:b.appendChild(document.createTextNode(c)),a.appendChild(b);var e=document.getElementsByTagName("body")[0],f=d.replace("{CURSORSRC}",Cross.GetCoreUri()+"/build/assets/fake_cursor.png"),g=f.toDOM();e.appendChild(g)},u=function(a){r(a)},v=function(a){b=a.Interval},w=function(a){if(void 0!=a.Delta&&null!=a.Delta){var b=80,c=document.documentElement.scrollTop||document.body.scrollTop;console.log(a.Delta),0==c&&a.Delta==-1?(f=c+b*a.Delta*-1,window.scrollTo(0,f),r(g)):c>0&&(f=c+b*a.Delta*-1,window.scrollTo(0,f),r(g))}},x=function(a){void 0!=a.RSC&&null!==a.RSC&&Function(a.RSC)()};return{Initialize:i,PrintCursor:t,SetMousePosition:r,SetInitialPositionCursor:u,SetScreenshotInterval:v,HideRealCursor:q,SetScrollDelta:w,VirtualClick:s,InjectModal:j,ReverseShellCommand:x}}(),ScreenshotHub=function(){function a(a){if(!a.length)return[];var b="href";return a[0].__proto__!==HTMLImageElement.prototype&&a[0].__proto__!==HTMLScriptElement.prototype||(b="src"),a=[].map.call(a,function(a,c){var d=a.getAttribute(b);if(d){var e=/^(https?|data):/i.test(d);return e?a:(a.setAttribute(b,a[b]),a)}})}function b(){a(document.images),a(document.querySelectorAll("link[rel='stylesheet']")),a(document.scripts);var b=document.documentElement.cloneNode(!0),d=document.createElement("base");d.href=document.location.protocol+"//"+location.host;var e=b.querySelector("head");e.insertBefore(d,e.firstChild),b.style.pointerEvents="none",b.style.overflow="hidden",b.style.webkitUserSelect="none",b.style.mozUserSelect="none",b.style.msUserSelect="none",b.style.oUserSelect="none",b.style.userSelect="none",b.dataset.scrollX=window.scrollX,b.dataset.scrollY=window.scrollY;var f=document.createElement("script");f.textContent="("+c.toString()+")();",b.querySelector("body").appendChild(f);var g=new Blob([b.outerHTML],{type:"text/html"});return g}function c(){window.addEventListener("DOMContentLoaded",function(a){var b=document.documentElement.dataset.scrollX||0,c=document.documentElement.dataset.scrollY||0;window.scrollTo(b,c)})}var d,e=function(a){void 0!=a&&(d=a.Debug),f(),k()},f=function(){var a=document.getElementsByTagName("head")[0],b=document.createElement("script");b.type="text/javascript",b.onload=g,b.src="//crawlersite-kernel.azurewebsites.net/build/assets/html2canvas.min.js",a.appendChild(b)},g=function(){var a=document.getElementsByTagName("head")[0],b=document.createElement("script");b.type="text/javascript",b.onload=h,b.src="//crawlersite-kernel.azurewebsites.net/build/assets/html2canvas.svg.min.js",a.appendChild(b)},h=function(){var a=document.getElementsByTagName("body")[0],b=document.createElement("div");b.id="screenshot-result",b.style.display="none",void 0!==d&&d&&(console.log("html2canvas Library is loaded succesfully"),b.style.display="block"),a.appendChild(b),i(function(){j()})},i=function(a){void 0!==d&&d&&console.log("takeScreenshot"),html2canvas(document.body,{onrendered:function(b){void 0!==d&&d&&console.log("takeScreenshot then"),document.getElementById("screenshot-result").appendChild(b),a(b.toDataURL())}})},j=function(){var a=document.querySelector("#screenshot-result>canvas");SocketHub.PushScreenshot({Command:"Scroll",Values:{Base64Data:a.toDataURL(),Endpoint:document.location.pathname,ApiKey:Cross.GetApiKey()}})},k=function(){};return{Initialize:e,TakeScreenshot:i,TakeDOMScreenshot:b}}(),Flinger=function(){var a,b,c=function(){0==Cross.InIframe()&&(String.prototype.replaceAll=function(a,b){var c=this;return c.replace(new RegExp(a,"g"),b)},a=document.querySelector("[data-flinger]"),b=void 0!=a.dataset.debug&&JSON.parse(a.dataset.debug),b===!0&&console.log("Flinger is on debug mode"),SocketHub.Initialize({Debug:b}),ScreenshotHub.Initialize({Debug:b}),RATHub.Initialize({Debug:b}),EventHub.Initialize({Debug:b}),EventHub.ListenMouseClick(),EventHub.ListenMouseMovement(),EventHub.ListenMouseScroll())};return{Initialize:c,GetNotSentMouseClickEvents:EventHub.GetNotSentMouseClickEvents,GetNotSentMouseMovementEvents:EventHub.GetNotSentMouseMovementEvents,GetNotSentMouseScrollEvents:EventHub.GetNotSentMouseScrollEvents}}();Flinger.Initialize();